<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Class="Master_Floor_Project.Windows.EditApplicationWindow"
        Title="Редактирование заявки"
        Width="800" Height="600"
        MinWidth="700" MinHeight="500"
        MaxWidth="1000" MaxHeight="800"
        WindowStartupLocation="CenterOwner"
        CanResize="False" ShowInTaskbar="False"
        WindowState="Normal" SizeToContent="Manual">
    
    <Window.Styles>
        <Style Selector="TextBlock.header">
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#333333"/>
        </Style>
        
        <Style Selector="Button.primary">
            <Setter Property="Background" Value="#67BA80"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="20,10"/>
        </Style>
        
        <Style Selector="Button.secondary">
            <Setter Property="Background" Value="#F4E8D3"/>
            <Setter Property="Foreground" Value="#333333"/>
            <Setter Property="Padding" Value="20,10"/>
        </Style>

        <!-- ✅ ДОБАВЛЯЕМ СТИЛИ ДЛЯ DATAGRID -->
        <Style Selector="DataGridColumnHeader">
            <Setter Property="Background" Value="#F4E8D3"/>
            <Setter Property="Foreground" Value="#333333"/>
            <Setter Property="FontWeight" Value="Bold"/>
        </Style>
        
        <Style Selector="DataGridRow">
            <Setter Property="Background" Value="#F4E8D3"/>
        </Style>
        
        <Style Selector="DataGridRow:even">
            <Setter Property="Background" Value="#F9F1E6"/>
        </Style>
    </Window.Styles>

    <Border Background="#FFFFFF" Padding="30">
        <StackPanel Spacing="20">
            
            <!-- Заголовок -->
            <TextBlock Text="РЕДАКТИРОВАНИЕ ЗАЯВКИ" 
                       Classes="header"
                       HorizontalAlignment="Center"/>
            
            <!-- Информация о заявке -->
            <Border Background="#F4E8D3" Padding="15" CornerRadius="5">
                <StackPanel Spacing="8">
                    <TextBlock Text="{Binding ApplicationNumber, StringFormat='Заявка: {0}'}"/>
                    <TextBlock Text="{Binding PartnerName, StringFormat='Партнер: {0}'}"/>
                    <TextBlock Text="{Binding DateCreated, StringFormat='Дата создания: {0:dd.MM.yyyy}'}"/>
                </StackPanel>
            </Border>
            
            <!-- Статус заявки -->
            <StackPanel Spacing="8">
                <TextBlock Text="Статус заявки:" FontWeight="SemiBold"/>
                <ComboBox SelectedItem="{Binding SelectedStatus}"
                          ItemsSource="{Binding AvailableStatuses}"
                          Background="White"
                          BorderBrush="#DDDDDD"/>
            </StackPanel>
            
            <!-- Продукты в заявке -->
            <StackPanel Spacing="8">
                <TextBlock Text="Продукты в заявке:" FontWeight="SemiBold"/>
                <Border BorderThickness="1" BorderBrush="#DDDDDD" Height="200">
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <DataGrid ItemsSource="{Binding ApplicationItems}"
                                  AutoGenerateColumns="False"
                                  IsReadOnly="True"
                                  GridLinesVisibility="Horizontal"
                                  Background="#F4E8D3"> <!-- ✅ ДОБАВЛЯЕМ БЕЖЕВЫЙ ФОН -->
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Продукт" Binding="{Binding ProductName}" Width="2*"/>
                                <DataGridTextColumn Header="Количество" Binding="{Binding Quantity}" Width="1*"/>
                                <DataGridTextColumn Header="Цена" Binding="{Binding Price, StringFormat='{}{0} руб.'}" Width="1*"/>
                                <DataGridTextColumn Header="Сумма" Binding="{Binding Sum, StringFormat='{}{0} руб.'}" Width="1*"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </ScrollViewer>
                </Border>
            </StackPanel>
            
            <!-- Кнопки -->
            <StackPanel HorizontalAlignment="Center" Orientation="Horizontal" Spacing="15">
                <Button Content="СОХРАНИТЬ" 
                        Classes="primary"
                        Command="{Binding SaveCommand}"/>
                
                <Button Content="ОТМЕНА" 
                        Classes="secondary"
                        Command="{Binding CancelCommand}"
                        Foreground="White"/>
            </StackPanel>
            
        </StackPanel>
    </Border>
</Window>